// general purpose delay code. // will delay for at least minimum, but no more than maximum, ticks// allowAbort defines whether the user can push onvoid GWDelay(long minimum, long maximum, Boolean allowAbort){	Boolean waitedLongEnough = false;	unsigned long startTime;	EventRecord event;	startTime = TickCount();	// always wait at least 4 seconds, to allow sounds to finish playing	if (minimum > 0) while ((TickCount() - startTime) < minimum) {}	while (!waitedLongEnough)	{		if (allowAbort)		{			if (WaitNextEvent(everyEvent, &event, 20L, nil))			{				switch (event.what)				{					case keyDown:					case autoKey:					case mouseDown:						waitedLongEnough = true;						break;					default:						break;				}			}		}				if (startTime < (TickCount() - maximum)) waitedLongEnough = true;			}}