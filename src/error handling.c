#include	"globals extern.h"#include	<string.h>#define kALRTFatal					2000#define kSTRMessageStrings			2000#define kSTRiFatal					1void FatalError(char *error, Boolean resolution){	Str255	errorHeader;	UInt8	errorString[256];	strcpy((char *) errorString + 1, error);	errorString[0] = strlen((char *) errorString + 1);	GetIndString(errorHeader, kSTRMessageStrings, kSTRiFatal);		ParamText(errorHeader, errorString, "\p", "\p");	if (Alert(kALRTFatal, nil) == cancel)		StopMusic();	if (resolution) RestoreResolution();	ExitToShell();}void WorldFileNotFoundDialog(Str255	fileName){	Rect	tempRect, tempRect2;	WindowPtr	dialogWindow;	ControlHandle	dialogOkayButton, tempControl;	PicHandle tempPict;	UseResFile(theFileStuff.GWDataFileNumber);	tempPict = GetPicture(909);	if (tempPict == nil) FatalError("Error loading PICT 999", true);	tempRect.left = 0;	tempRect.right = (**tempPict).picFrame.right + 2;	tempRect.top = 0;	tempRect.bottom = (**tempPict).picFrame.bottom + 2;		CenterRectInRect(&tempRect, &(theGWorlds.screenGWorld->portRect));	// save the window behind the dialog		CopyBits( &((GrafPtr)(&theUserInterface.myCWindowRecord.port))->portBits, &((GrafPtr)theGWorlds.screenGWorld)->portBits,		&tempRect, &tempRect, srcCopy, (RgnHandle)0L );	tempRect2.left = 0;	tempRect2.right = (**tempPict).picFrame.right;	tempRect2.top = 0;	tempRect2.bottom = (**tempPict).picFrame.bottom;	CenterRectInRect(&tempRect2, &(**theUserInterface.gameGDevice).gdRect);	dialogWindow  = NewCWindow(nil, &tempRect2, "\p", true, plainDBox, (WindowPtr)-1L, false, (long)nil);	SetPort(dialogWindow);	DrawPicture(tempPict, &(**tempPict).picFrame);	ReleaseResource((Handle)tempPict);	UseResFile(theFileStuff.applicationFile);		SetRect(&tempRect2, 110, 195, 170, 215); 	dialogOkayButton = NewControl(dialogWindow, &tempRect2, "\pOkay", true, 0, 0, 0, 0, 0 );	MoveTo(43, 145);	DrawString(fileName);	tempControl = MarksCustomDialog(dialogWindow);	if (tempControl == nil)	{		HiliteControl(dialogOkayButton, 10);		GWDelay(0, 10, false);		HiliteControl(dialogOkayButton, 0);	}								DisposeWindow(dialogWindow);	SetGWorld(&theUserInterface.myCWindowRecord.port, GetMainDevice());	// update the window behind the control		CopyBits(  &((GrafPtr)theGWorlds.screenGWorld)->portBits, &((GrafPtr)(&theUserInterface.myCWindowRecord.port))->portBits,		&tempRect, &tempRect,  srcCopy, ( RgnHandle )0L );}